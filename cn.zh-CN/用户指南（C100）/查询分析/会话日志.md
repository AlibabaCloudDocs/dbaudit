# 会话日志 {#task_592917 .task}

本文介绍了在云盾数据库审计系统中查询会话日志的具体操作。通过会话日志，您可以查询客户端与服务器端之间建立的会话信息。

1.  登录云盾数据库审计系统。具体操作请参见[登录系统](cn.zh-CN/用户指南（C100）/登录系统.md#)。
2.  在左侧导航栏，单击**查询分析** \> **会话日志**。
3.  在会话日志页面，设置要查询的**时间范围**和查询条件。![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/475384/156223169449376_zh-CN.png)

 

    -   时间范围取值：最近5分钟、最近30分钟、最近1小时、最近6小时、本日、本周、本月、自定义。
    -   查询条件支持基础查询和高级搜索。
        -   基础查询：通过设置筛选条件查询相关记录。单击**更多条件**可以显示更多筛选条件。

            ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/475384/156223169549377_zh-CN.png)

            支持的筛选条件见下表。

            |筛选项|是否默认显示|说明|
            |---|------|--|
            |数据库|是|要查询的数据库。|
            |数据库账号|是|登录到数据库的账号名称。|
            |客户端IP|是|客户端的IP地址，支持查询IPv4或IPv6地址。|
            |客户端端口|是|客户端的端口号。|
            |服务端IP|是|服务端的IP地址，支持查询IPv4或IPv6地址。|
            |服务端端口|是|服务端的端口号。|
            |会话ID|否|要查询的会话ID。|
            |数据库类型|否|数据库的类型。|
            |客户端MAC|否|客户端机器的MAC地址。|
            |服务端MAC|否|服务端机器的MAC地址。|
            |客户端工具|否|登录数据库的客户端工具。|
            |主机名|否|数据库服务器的主机名。|
            |操作系统用户名|否|客户端操作系统的用户名。|
            |数据库名/实例名|否|数据库名称或实例名称。|
            |状态标识|否|会话状态，取值：             -   全部
            -   未知
            -   登入成功
            -   登入失败
 |
            |SQL总记录数|否|SQL的总记录数量。|
            |会话请求总流量|否|会话请求的总流量。|
            |会话返回总流量|否|会话返回的总流量。|

        -   高级搜索：单击**高级搜索**，通过编写**条件表达式**，设置自定义查询条件。 在高级搜索页面，单击**条件表达式编写规则**，可以展开或隐藏条件表达式编写规则。

            ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/492095/156223169549356_zh-CN.png)

    **说明：** 设置查询条件后，单击**保存**，可以保存查询条件。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/492095/156223169549358_zh-CN.png)

    已保存的查询条件可以在查询条件下拉框中直接调用。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/492095/156223169549359_zh-CN.png)

4.  单击**搜索**，执行查询。 

    **说明：** 一次查询最多可查询10,000条记录。

5.  在会话日志页面下方查看返回记录。![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/475384/156223169549379_zh-CN.png)

 

    **说明：** 您可以单击**设置显示列**图标，并在设置显示列对话框中勾选要在返回结果中显示的列选项。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/492095/156223169549360_zh-CN.png)

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/475383/156223169549368_zh-CN.png)


[为数据库配置审计规则](cn.zh-CN/用户指南（C100）/规则配置/为数据库配置审计规则.md#)

